<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<!-- 
	There is a maven plugin for automatically generating Karaf features. This works however not properly 
	and generates an overly complex feature.xml which makes Karaf hang forever.

	We thus define a simple feature.xml for the IDS Core Platform here. 
-->
<features xmlns="http://karaf.apache.org/xmlns/features/v1.4.0" name="ids">
	<feature name="ids" description="IDS Karaf Feature" version="1.1.0">
		<details>Feature Description for Apache Karaf including all IDS bundles. This project does not contain the code, only the feature description.</details>
		
		<!--<bundle start-level="70">mvn:org.asynchttpclient/org.asynchttpclient/2.0.15</bundle> -->
		<!-- <bundle start-level="70">mvn:org.asynchttpclient/async-http-client/2.0.31</bundle> -->

		<bundle start-level="70">mvn:com.google.protobuf/protobuf-java/3.0.0</bundle>
		<bundle start-level="70">mvn:com.github.jnr/jnr-unixsockets/0.9.0</bundle>

		<!-- Dependencies which must be available at runtime. Can be features or bundles. -->
		<bundle start-level="70">mvn:org.apache.felix/org.apache.felix.prefs/1.1.0</bundle>
		<bundle start-level="70">mvn:com.google.code.gson/gson/2.7</bundle>
		<bundle start-level="70">mvn:org.apache.camel/camel-core-osgi/2.19.2</bundle>
		<bundle start-level="70">mvn:de.fraunhofer.aisec/tpm2j/1.0.4</bundle>        
		<!-- <bundle start-level="70">mvn:org.eclipse.jetty/jetty-util/9.3.14.v20161028</bundle>
		<bundle start-level="70">mvn:org.eclipse.jetty/jetty-server/9.3.14.v20161028</bundle>
		<bundle start-level="70">mvn:org.eclipse.jetty/jetty-http/9.3.14.v20161028</bundle>
		<bundle start-level="70">mvn:org.eclipse.jetty/jetty-io/9.3.14.v20161028</bundle>
		<bundle start-level="70">mvn:org.eclipse.jetty/jetty-servlet/9.3.14.v20161028</bundle>
		<bundle start-level="70">mvn:org.eclipse.jetty/jetty-servlets/9.3.14.v20161028</bundle>
		<bundle start-level="70">mvn:org.eclipse.jetty.websocket/websocket-api/9.3.14.v20161028</bundle>
		<bundle start-level="70">mvn:org.eclipse.jetty.websocket/websocket-servlet/9.3.14.v20161028</bundle> -->

		<feature dependency="true">wrap</feature>
		<feature version="2.19.2" dependency="true">camel</feature>        

		<feature version="9.3.14.v20161028">pax-jetty</feature>        
		<feature version="6.0.6">pax-http-whiteboard</feature>        

		<!-- REST feature provided by CXF -->
		<feature version="3.1.11" dependency="true">cxf-jaxrs</feature>
		<!-- JSON is no fun without Jackson -->
		<feature version="3.1.11" dependency="true">cxf-jackson</feature>
		
		<!-- Declarative OSGi Services -->
		<feature version="4.1.2" dependency="true">scr</feature>
		
		<!-- Asynchronous HTTP requests, required for camel-ids -->
		<feature version="2.19.2" dependency="true">camel-ahc</feature>
		
		<!-- camel-core-osgi is not contained in main camel feature, but is needed for the ids-webconsole to directly manage camel routes via REST API -->
		<bundle dependency="true">mvn:org.apache.camel/camel-core-osgi/2.19.2</bundle>
		
		<!-- This is how to add a custom config file which will be picked up by Config Admin-->
		<!-- <configfile finalname="/etc/ConfigApp.cfg">mvn:net.lr.tutorial.configadmin/configadmin-features/${pom.version}/cfg</configfile> -->

		<bundle>wrap:mvn:org.reactivestreams/reactive-streams/1.0.0</bundle>
	    <bundle>wrap:mvn:org.asynchttpclient/async-http-client/2.0.34$Export-Package=org.asynchttpclient.*;version=2.0.34&amp;DynamicImport-Package=*</bundle>


		<!-- OPC-UA support (not yet available as a feature in Karaf 4.1.2, thus as individual bundles) -->
		<bundle>mvn:org.apache.camel/camel-milo/2.19.2</bundle>
		<bundle>mvn:org.eclipse.milo/stack-core/0.1.3</bundle>
		<bundle>mvn:org.eclipse.milo/stack-client/0.1.3</bundle>
		<bundle>mvn:org.eclipse.milo/stack-server/0.1.3</bundle>
		<bundle>mvn:org.eclipse.milo/sdk-core/0.1.3</bundle>
		<bundle>mvn:org.eclipse.milo/sdk-client/0.1.3</bundle>
		<bundle>mvn:org.eclipse.milo/sdk-server/0.1.3</bundle>
		<bundle>mvn:org.javassist/javassist/3.20.0-GA</bundle>
		<bundle>mvn:com.codepoetics/protonpack/1.10</bundle>
		<bundle>wrap:mvn:org.reflections/reflections/0.9.10</bundle>
		<bundle>mvn:com.google.guava/guava/19.0</bundle>
		<bundle>mvn:org.jooq/jool/0.9.10</bundle>
		<bundle>mvn:com.sun.xml.bind/jaxb-core/2.2.11</bundle>
		<bundle>mvn:com.sun.xml.bind/jaxb-impl/2.2.11</bundle>
		<bundle>mvn:io.netty/netty-codec/4.0.45.Final</bundle>
		<bundle>mvn:io.netty/netty-transport/4.0.45.Final</bundle>
		<bundle>mvn:io.netty/netty-handler/4.0.45.Final</bundle>
		<bundle>mvn:io.netty/netty-buffer/4.0.45.Final</bundle>
		<bundle>mvn:io.netty/netty-common/4.0.45.Final</bundle>
		

		<bundle>mvn:io.dropwizard.metrics/metrics-core/3.1.2</bundle>


		<!-- IDS specific bundles -->
		<bundle start-level="80">mvn:de.fhg.ids/api/1.1.0-SNAPSHOT</bundle>
		<bundle start-level="80">mvn:de.fhg.ids/ids-webconsole/1.1.0-SNAPSHOT</bundle> 
		<bundle start-level="80">mvn:de.fhg.ids/camel-ids/1.1.0-SNAPSHOT</bundle>
		<bundle start-level="80">mvn:de.fhg.ids/ids-container-manager/1.1.0-SNAPSHOT</bundle>
		<bundle start-level="80">mvn:de.fhg.ids/ids-route-manager/1.1.0-SNAPSHOT</bundle>
		<bundle start-level="80">mvn:de.fhg.ids/ids-dataflow-control/1.1.0-SNAPSHOT</bundle>

	</feature>
</features>

